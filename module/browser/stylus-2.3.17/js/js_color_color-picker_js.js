"use strict";{const e=self,t=e,r=e.document;(self.webpackChunkStylus=self.webpackChunkStylus||[]).push([["js_color_color-picker_js"],{2928:(e,t,r)=>{let HEX;t.constrain=constrain,t.constrainHue=constrainHue,t.format=function(color="",type=color.type,{hexUppercase,usoMode,round}={}){if(!color||!type)return"string"==typeof color?color:"";const{a:e,type:src=guessType(color)}=color,aFmt=formatAlpha(e),aStr=aFmt?", "+aFmt:"",srcConv="hex"===src?"rgb":src,dstConv="hex"===type?"rgb":type;color=srcConv===dstConv?color:FROM_HSV[dstConv](TO_HSV[srcConv](color)),round=round?Math.round:e=>e;const{r:t,g:r,b:n,h:o,s:a,l:s,w:i}=color;switch(type){case"hex":{let res="#"+hex2(t)+hex2(r)+hex2(n)+(aStr?hex2(Math.round(255*e)):"");return usoMode||(res=res.replace(/^#(.)\1(.)\2(.)\3(?:(.)\4)?$/,"#$1$2$3$4")),hexUppercase?res.toUpperCase():res}case"rgb":{const rgb=[t,r,n].map(Math.round).join(", ");return usoMode?rgb:`rgb${aStr?"a":""}(${rgb}${aStr})`}case"hsl":return`hsl${aStr?"a":""}(${round(o)}, ${round(a)}%, ${round(s)}%${aStr})`;case"hwb":return`hwb(${round(o)} ${round(i)}% ${round(n)}%${aFmt?" / "+aFmt:""})`}},t.formatAlpha=formatAlpha,t.parse=function(e){return"string"==typeof e&&(e=e.trim())?"#"===e[0]?parseHex(e):e.endsWith(")")&&(e=e.match(/^(hwb|(hsl|rgb)a?)\(\s*([^)]+)/i))?parseFunc((e[2]||e[1]).toLowerCase(),e[3]):NAMED_COLORS.get(e.toLowerCase()):void 0},t.snapToInt=snapToInt,t.testAt=testAt;const ALPHA_DIGITS=3,RXS_NUM=/\s*[+-]?(\.\d+|\d+(\.\d*)?)(e[+-]?\d+)?/.source.replace(/\(/g,"(?:"),expandRe=e=>RegExp(e.source.replace(/N/g,RXS_NUM).replace(/A/g,"(?:deg|g?rad|turn)?"),"iy"),RX_COLOR={hex:/#([a-f\d]{3}(?:[a-f\d](?:[a-f\d]{2}){0,2})?)\b/iy,hsl:expandRe(/^NA(\s*(,N%\s*){2}(,N%?\s*)?|(\s+N%){2}\s*(\/N%?\s*)?)$/),hwb:expandRe(/^(NA|none)(\s+(N%|none)){2}\s*(\/(N%?|none)\s*)?$/),rgb:expandRe(/^N(%?)(\s*,N\1\s*,N\1\s*(,N%?\s*)?|\s+N\1\s+N\1\s*(\/N%?\s*)?)$/)},ANGLE_TO_DEG={grad:.9,rad:180/Math.PI,turn:360},TO_HSV={hex:RGBtoHSV,hsl:function({h:e,s:t,l:r,a:n}){const o=t*(r<50?r:100-r)/100;return{h:constrainHue(e),s:o+r?200*o/(o+r)/100:0,v:(o+r)/100,a:n}},hwb:function({h:e,w:t,b:r,a:n}){return t=constrain(0,100,t)/100,r=constrain(0,100,r)/100,{h:constrainHue(e),s:1===r?0:1-t/(1-r),v:1-r,a:n}},rgb:RGBtoHSV},FROM_HSV={hex:HSVtoRGB,hsl:function({h:e,s:t,v:r,a:n}){const o=(2-t)*r/2,a=o<.5?2*o:2-2*o;return{h:constrainHue(e),s:a?t*r/a*100:0,l:100*o,a:n}},hwb:function({h:e,s:t,v:r,a:n}){return{h:constrainHue(e),w:(1-t)*r*100,b:100*(1-r),a:n}},rgb:HSVtoRGB},guessType=e=>"r"in e?"rgb":"w"in e?"hwb":"v"in e?"hsv":"l"in e?"hsl":void 0;function initHexMap(){HEX=Array(256).fill(-65535);for(let e=48;e<58;e++)HEX[e]=e-48;for(let e=65;e<71;e++)HEX[e]=e-65+10;for(let e=97;e<103;e++)HEX[e]=e-97+10}function parseHex(str){let e,t,r,n;HEX||initHexMap();const len=str.length;if(4===len||5===len?(e=17*HEX[str.charCodeAt(1)])>=0&&(t=17*HEX[str.charCodeAt(2)])>=0&&(r=17*HEX[str.charCodeAt(3)])>=0&&(len<5||(n=17*HEX[str.charCodeAt(4)]/255)>=0):(7===len||9===len)&&(e=16*HEX[str.charCodeAt(1)]+HEX[str.charCodeAt(2)])>=0&&(t=16*HEX[str.charCodeAt(3)]+HEX[str.charCodeAt(4)])>=0&&(r=16*HEX[str.charCodeAt(5)]+HEX[str.charCodeAt(6)])>=0&&(len<9||(n=(16*HEX[str.charCodeAt(7)]+HEX[str.charCodeAt(8)])/255)>=0))return{type:"hex",r:e,g:t,b:r,a:n}}function parseFunc(type,val){if(!testAt(RX_COLOR[type],0,val))return;const parts=val.trim().split(/\s*[,/]\s*|\s+/),e=parseFloat(parts[0]),t=parseFloat(parts[1]),r=parseFloat(parts[2]),n=parseFloat(parts[3]),o=isNaN(n)?void 0:constrain(0,1,parts[3].endsWith("%")?n/100:n);if("rgb"===type){const n=parts[0].endsWith("%")?2.55:1;return{type,r:constrain(0,255,Math.round(e*n)),g:constrain(0,255,Math.round(t*n)),b:constrain(0,255,Math.round(r*n)),a:o}}const a=constrainHue(e*(ANGLE_TO_DEG[parts[0].match(/\D*$/)[0].toLowerCase()]||1)),n2c=constrain(0,100,t||0),n3c=constrain(0,100,r||0);return"hwb"===type?{type,h:a,w:n2c,b:n3c,a:o}:{type,h:a,s:n2c,l:n3c,a:o}}function formatAlpha(e){return isNaN(e)?"":(e+.5*Math.pow(10,-ALPHA_DIGITS)).toFixed(ALPHA_DIGITS+1).slice(0,-1).replace(/^0(?=\.[1-9])|^1\.0+?$|\.?0+$/g,"")}function RGBtoHSV({r:e,g:t,b:r,a:n}){e/=255,t/=255,r/=255;const MaxC=Math.max(e,t,r),DeltaC=MaxC-Math.min(e,t,r);let o=0===DeltaC?0:MaxC===e?(t-r)/DeltaC%6*60:MaxC===t?60*((r-e)/DeltaC+2):MaxC===r?60*((e-t)/DeltaC+4):0;return o=constrainHue(o),{h:o,s:0===MaxC?0:DeltaC/MaxC,v:MaxC,a:n}}function HSVtoRGB({h:e,s:t,v:r,a:n}){e=constrainHue(e);const o=t*r,a=o*(1-Math.abs(e/60%2-1)),s=r-o,[i,p,l]=e>=0&&e<60?[o,a,0]:e>=60&&e<120?[a,o,0]:e>=120&&e<180?[0,o,a]:e>=180&&e<240?[0,a,o]:e>=240&&e<300?[a,0,o]:e>=300&&e<360?[o,0,a]:[];return{r:snapToInt(Math.round(255*(i+s))),g:snapToInt(Math.round(255*(p+s))),b:snapToInt(Math.round(255*(l+s))),a:n}}function constrain(min,max,value){return value<min?min:value>max?max:value}function constrainHue(e){return e<0?e%360+360:e>=360?e%360:e}function snapToInt(num){const int=Math.round(num);return Math.abs(int-num)<.001?int:num}function hex2(val){return(val<16?"0":"")+Math.round(val).toString(16)}function testAt(e,index,text){return!!e&&(e.lastIndex=index,e.test(text))}const NAMED_COLORS=new Map([["transparent",{r:0,g:0,b:0,a:0,type:"rgb"}],["aliceblue",{r:240,g:248,b:255,type:"hex"}],["antiquewhite",{r:250,g:235,b:215,type:"hex"}],["aqua",{r:0,g:255,b:255,type:"hex"}],["aquamarine",{r:127,g:255,b:212,type:"hex"}],["azure",{r:240,g:255,b:255,type:"hex"}],["beige",{r:245,g:245,b:220,type:"hex"}],["bisque",{r:255,g:228,b:196,type:"hex"}],["black",{r:0,g:0,b:0,type:"hex"}],["blanchedalmond",{r:255,g:235,b:205,type:"hex"}],["blue",{r:0,g:0,b:255,type:"hex"}],["blueviolet",{r:138,g:43,b:226,type:"hex"}],["brown",{r:165,g:42,b:42,type:"hex"}],["burlywood",{r:222,g:184,b:135,type:"hex"}],["cadetblue",{r:95,g:158,b:160,type:"hex"}],["chartreuse",{r:127,g:255,b:0,type:"hex"}],["chocolate",{r:210,g:105,b:30,type:"hex"}],["coral",{r:255,g:127,b:80,type:"hex"}],["cornflowerblue",{r:100,g:149,b:237,type:"hex"}],["cornsilk",{r:255,g:248,b:220,type:"hex"}],["crimson",{r:220,g:20,b:60,type:"hex"}],["cyan",{r:0,g:255,b:255,type:"hex"}],["darkblue",{r:0,g:0,b:139,type:"hex"}],["darkcyan",{r:0,g:139,b:139,type:"hex"}],["darkgoldenrod",{r:184,g:134,b:11,type:"hex"}],["darkgray",{r:169,g:169,b:169,type:"hex"}],["darkgrey",{r:169,g:169,b:169,type:"hex"}],["darkgreen",{r:0,g:100,b:0,type:"hex"}],["darkkhaki",{r:189,g:183,b:107,type:"hex"}],["darkmagenta",{r:139,g:0,b:139,type:"hex"}],["darkolivegreen",{r:85,g:107,b:47,type:"hex"}],["darkorange",{r:255,g:140,b:0,type:"hex"}],["darkorchid",{r:153,g:50,b:204,type:"hex"}],["darkred",{r:139,g:0,b:0,type:"hex"}],["darksalmon",{r:233,g:150,b:122,type:"hex"}],["darkseagreen",{r:143,g:188,b:143,type:"hex"}],["darkslateblue",{r:72,g:61,b:139,type:"hex"}],["darkslategray",{r:47,g:79,b:79,type:"hex"}],["darkslategrey",{r:47,g:79,b:79,type:"hex"}],["darkturquoise",{r:0,g:206,b:209,type:"hex"}],["darkviolet",{r:148,g:0,b:211,type:"hex"}],["deeppink",{r:255,g:20,b:147,type:"hex"}],["deepskyblue",{r:0,g:191,b:255,type:"hex"}],["dimgray",{r:105,g:105,b:105,type:"hex"}],["dimgrey",{r:105,g:105,b:105,type:"hex"}],["dodgerblue",{r:30,g:144,b:255,type:"hex"}],["firebrick",{r:178,g:34,b:34,type:"hex"}],["floralwhite",{r:255,g:250,b:240,type:"hex"}],["forestgreen",{r:34,g:139,b:34,type:"hex"}],["fuchsia",{r:255,g:0,b:255,type:"hex"}],["gainsboro",{r:220,g:220,b:220,type:"hex"}],["ghostwhite",{r:248,g:248,b:255,type:"hex"}],["gold",{r:255,g:215,b:0,type:"hex"}],["goldenrod",{r:218,g:165,b:32,type:"hex"}],["gray",{r:128,g:128,b:128,type:"hex"}],["grey",{r:128,g:128,b:128,type:"hex"}],["green",{r:0,g:128,b:0,type:"hex"}],["greenyellow",{r:173,g:255,b:47,type:"hex"}],["honeydew",{r:240,g:255,b:240,type:"hex"}],["hotpink",{r:255,g:105,b:180,type:"hex"}],["indianred",{r:205,g:92,b:92,type:"hex"}],["indigo",{r:75,g:0,b:130,type:"hex"}],["ivory",{r:255,g:255,b:240,type:"hex"}],["khaki",{r:240,g:230,b:140,type:"hex"}],["lavender",{r:230,g:230,b:250,type:"hex"}],["lavenderblush",{r:255,g:240,b:245,type:"hex"}],["lawngreen",{r:124,g:252,b:0,type:"hex"}],["lemonchiffon",{r:255,g:250,b:205,type:"hex"}],["lightblue",{r:173,g:216,b:230,type:"hex"}],["lightcoral",{r:240,g:128,b:128,type:"hex"}],["lightcyan",{r:224,g:255,b:255,type:"hex"}],["lightgoldenrodyellow",{r:250,g:250,b:210,type:"hex"}],["lightgray",{r:211,g:211,b:211,type:"hex"}],["lightgrey",{r:211,g:211,b:211,type:"hex"}],["lightgreen",{r:144,g:238,b:144,type:"hex"}],["lightpink",{r:255,g:182,b:193,type:"hex"}],["lightsalmon",{r:255,g:160,b:122,type:"hex"}],["lightseagreen",{r:32,g:178,b:170,type:"hex"}],["lightskyblue",{r:135,g:206,b:250,type:"hex"}],["lightslategray",{r:119,g:136,b:153,type:"hex"}],["lightslategrey",{r:119,g:136,b:153,type:"hex"}],["lightsteelblue",{r:176,g:196,b:222,type:"hex"}],["lightyellow",{r:255,g:255,b:224,type:"hex"}],["lime",{r:0,g:255,b:0,type:"hex"}],["limegreen",{r:50,g:205,b:50,type:"hex"}],["linen",{r:250,g:240,b:230,type:"hex"}],["magenta",{r:255,g:0,b:255,type:"hex"}],["maroon",{r:128,g:0,b:0,type:"hex"}],["mediumaquamarine",{r:102,g:205,b:170,type:"hex"}],["mediumblue",{r:0,g:0,b:205,type:"hex"}],["mediumorchid",{r:186,g:85,b:211,type:"hex"}],["mediumpurple",{r:147,g:112,b:219,type:"hex"}],["mediumseagreen",{r:60,g:179,b:113,type:"hex"}],["mediumslateblue",{r:123,g:104,b:238,type:"hex"}],["mediumspringgreen",{r:0,g:250,b:154,type:"hex"}],["mediumturquoise",{r:72,g:209,b:204,type:"hex"}],["mediumvioletred",{r:199,g:21,b:133,type:"hex"}],["midnightblue",{r:25,g:25,b:112,type:"hex"}],["mintcream",{r:245,g:255,b:250,type:"hex"}],["mistyrose",{r:255,g:228,b:225,type:"hex"}],["moccasin",{r:255,g:228,b:181,type:"hex"}],["navajowhite",{r:255,g:222,b:173,type:"hex"}],["navy",{r:0,g:0,b:128,type:"hex"}],["oldlace",{r:253,g:245,b:230,type:"hex"}],["olive",{r:128,g:128,b:0,type:"hex"}],["olivedrab",{r:107,g:142,b:35,type:"hex"}],["orange",{r:255,g:165,b:0,type:"hex"}],["orangered",{r:255,g:69,b:0,type:"hex"}],["orchid",{r:218,g:112,b:214,type:"hex"}],["palegoldenrod",{r:238,g:232,b:170,type:"hex"}],["palegreen",{r:152,g:251,b:152,type:"hex"}],["paleturquoise",{r:175,g:238,b:238,type:"hex"}],["palevioletred",{r:219,g:112,b:147,type:"hex"}],["papayawhip",{r:255,g:239,b:213,type:"hex"}],["peachpuff",{r:255,g:218,b:185,type:"hex"}],["peru",{r:205,g:133,b:63,type:"hex"}],["pink",{r:255,g:192,b:203,type:"hex"}],["plum",{r:221,g:160,b:221,type:"hex"}],["powderblue",{r:176,g:224,b:230,type:"hex"}],["purple",{r:128,g:0,b:128,type:"hex"}],["rebeccapurple",{r:102,g:51,b:153,type:"hex"}],["red",{r:255,g:0,b:0,type:"hex"}],["rosybrown",{r:188,g:143,b:143,type:"hex"}],["royalblue",{r:65,g:105,b:225,type:"hex"}],["saddlebrown",{r:139,g:69,b:19,type:"hex"}],["salmon",{r:250,g:128,b:114,type:"hex"}],["sandybrown",{r:244,g:164,b:96,type:"hex"}],["seagreen",{r:46,g:139,b:87,type:"hex"}],["seashell",{r:255,g:245,b:238,type:"hex"}],["sienna",{r:160,g:82,b:45,type:"hex"}],["silver",{r:192,g:192,b:192,type:"hex"}],["skyblue",{r:135,g:206,b:235,type:"hex"}],["slateblue",{r:106,g:90,b:205,type:"hex"}],["slategray",{r:112,g:128,b:144,type:"hex"}],["slategrey",{r:112,g:128,b:144,type:"hex"}],["snow",{r:255,g:250,b:250,type:"hex"}],["springgreen",{r:0,g:255,b:127,type:"hex"}],["steelblue",{r:70,g:130,b:180,type:"hex"}],["tan",{r:210,g:180,b:140,type:"hex"}],["teal",{r:0,g:128,b:128,type:"hex"}],["thistle",{r:216,g:191,b:216,type:"hex"}],["tomato",{r:255,g:99,b:71,type:"hex"}],["turquoise",{r:64,g:224,b:208,type:"hex"}],["violet",{r:238,g:130,b:238,type:"hex"}],["wheat",{r:245,g:222,b:179,type:"hex"}],["white",{r:255,g:255,b:255,type:"hex"}],["whitesmoke",{r:245,g:245,b:245,type:"hex"}],["yellow",{r:255,g:255,b:0,type:"hex"}],["yellowgreen",{r:154,g:205,b:50,type:"hex"}]]);t.NAMED_COLORS=NAMED_COLORS,t.RX_COLOR=RX_COLOR,t.fromHSV=(color,type)=>FROM_HSV[type](color),t.guessType=guessType,t.toHSV=color=>TO_HSV[color.type||"rgb"](color),r.d(t,{})},8872:(e,t,n)=>{t.default=function(e,targets,dummyContainer=r.body){(targets=targets||{}).fore="color";const colors={},done={};let numDone=0,numTotal=0;const rootStyle=getStyle(r.documentElement);for(const e in targets){const base={r:0,g:0,b:0,a:0};blend(base,rootStyle[targets[e]]),colors[e]=base,numTotal++}const isDummy="string"==typeof e;isDummy&&(e=dummyContainer.appendChild(o.$create(e,{style:"display: none"})));for(let current=e;current;current=current&&current.parentElement){const style=getStyle(current);for(const e in targets)if(!done[e]&&(done[e]=blend(colors[e],style[targets[e]]),numDone+=done[e]?1:0,numDone===numTotal)){current=null;break}colors.style=colors.style||style}isDummy&&e.remove();for(const e in targets){const t=colors[e];isOpaque(t)||blend(colors[e]={r:255,g:255,b:255,a:1},t);const{r,g:n,b:o,a}=colors[e];colors[e]=`rgba(${r}, ${n}, ${o}, ${a})`,colors[e+"Luma"]=(.299*r+.587*n+.114*o)/256}return a.debounce(clearCache),colors};var o=n(7986),a=n(6940);const styleCache=new Map;function blend(base,color){let e,t,r,n;if("string"==typeof color?[e,t,r,n=255]=(color.match(/\d+/g)||[]).map(Number):({r:e,g:t,b:r,a:n=255}=color),255===n)base.r=e,base.g=t,base.b=r,base.a=1;else if(n){const mixedA=1-(1-n/255)*(1-base.a),o=n/255/mixedA,a=base.a*(1-mixedA)/mixedA;base.r=Math.round(e*o+base.r*a),base.g=Math.round(t*o+base.g*a),base.b=Math.round(r*o+base.b*a),base.a=mixedA}return isOpaque(base)}function getStyle(e){let style=styleCache.get(e);return style||(style=getComputedStyle(e),styleCache.set(e,style)),style}function clearCache(){styleCache.clear()}function isOpaque({a:e}){return Math.abs(e-1)<.001}},8976:(e,n,o)=>{o.r(n),n.default=function(e){const{constrain}=a,CSS_PREFIX="colorpicker-",HUE_COLORS=[{hex:"#ff0000",start:0},{hex:"#ffff00",start:.17},{hex:"#00ff00",start:.33},{hex:"#00ffff",start:.5},{hex:"#0000ff",start:.67},{hex:"#ff00ff",start:.83},{hex:"#ff0000",start:1}];let currentFormat,maxHeight="0px",HSV={};const prevHSV={};let n,o,i,p,l,h,c,u,g,b,y,f,initialized=!1,shown=!1,options={};const d={},x={},m={},allowInputFocus=!("ontouchstart"in r)||t.innerHeight>800,dragging={saturationPointerPos:{x:0,y:0},hueKnobPos:0,saturation:!1,hue:!1,opacity:!1,popup:!1};let prevFocusedElement,lastOutputColor,userActivity;const PUBLIC_API={$root:n,show:function(opt){initialized||init();HSV={},currentFormat="",options=PUBLIC_API.options=opt,!1!==opt.round&&(opt.round=!0);prevFocusedElement=r.activeElement,userActivity=!1,lastOutputColor=opt.color||"",b.title=opt.tooltipForSwitcher||"",maxHeight=`${opt.maxHeight||300}px`,n.className=[...n.classList].filter(e=>!e.startsWith(`${CSS_PREFIX}theme-`)).concat(CSS_PREFIX+"theme-"+("dark"===opt.theme||"light"===opt.theme?opt.theme:guessTheme())).join(" "),r.body.appendChild(n),shown=!0,registerEvents(),setFromColor(opt.color),setFromHexLettercaseElement(),Array.isArray(options.palette)&&renderPalette();(opt.left||opt.top||opt.right||opt.bottom)&&reposition()},hide,setColor,getColor:function(type){if(!initialized)return;readCurrentColorFromRamps();const color=a.fromHSV(HSV,type);return type?colorToString(color,type):color},options};return PUBLIC_API;function init(){function e(cls,props={},children=[]){(Array.isArray(props)||"string"==typeof props||props instanceof Node)&&(children=props,props={});const e=r.createElement(props.tag||"div");return e.className=toArray(cls).map(e=>e?CSS_PREFIX+e:"").join(" "),e.append(...toArray(children).filter(Boolean)),props&&delete props.tag,Object.assign(e,props)}const alphaPattern=/^\s*(0+\.?|0*\.\d+|0*1\.?|0*1\.0*)?\s*$/.source,makeNum=(type,channel,props,min,max)=>{return e(["input-field",`${type}-${channel}`],[(obj=x,key=type,obj[key]||(obj[key]={}))[channel]=e("input",props||{tag:"input",type:"number",min,max,step:1}),e("title",channel.toUpperCase())]);var obj,key},ColorGroup=(type,channels)=>d[type]=e(["input-group",type],[...Object.entries(channels).map(([e,t])=>makeNum(type,e,null,t[0],t[1])),makeNum(type,"a",{tag:"input",type:"text",pattern:alphaPattern,spellcheck:!1})]);n=e("popup",{oninput:setFromInputs,onkeydown:setFromKeyboard},[o=e("saturation-container",{onmousedown:onSaturationMouseDown,onmouseup:onSaturationMouseUp},[e("saturation",[e("value",[i=e("drag-pointer")])])]),e("popup-mover",{onmousedown:onPopupMoveStart}),e("sliders",[e("hue",{onmousedown:onHueMouseDown},[p=e("hue-container",[l=e("hue-knob",{onmousedown:onHueKnobMouseDown})])]),e("opacity",[h=e("opacity-container",{onmousedown:onOpacityMouseDown},[c=e("opacity-bar"),u=e("opacity-knob",{onmousedown:onOpacityKnobMouseDown})])]),e("empty"),g=e("swatch")]),e(["input-container","hex"],[d.hex=e(["input-group","hex"],[e(["input-field","hex"],[y=e("input",{tag:"input",type:"text",spellcheck:!1,pattern:/^\s*#([a-fA-F\d]{3}([a-fA-F\d]([a-fA-F\d]{2}([a-fA-F\d]{2})?)?)?)\s*$/.source}),e("title",[m.true=e("title-action",{onclick:onHexLettercaseClicked},"HEX")," / ",m.false=e("title-action",{onclick:onHexLettercaseClicked},"hex")])])]),ColorGroup("rgb",{r:[0,255],g:[0,255],b:[0,255]}),ColorGroup("hsl",{h:[],s:[0,100],l:[0,100]}),ColorGroup("hwb",{h:[],w:[0,100],b:[0,100]}),e("format-change",[b=e("format-change-button",{onclick:setFromFormatElement},"↔")]),t.EyeDropper&&e("dropper",{tag:"img",srcset:"icon/eyedropper/16px.png, icon/eyedropper/32px.png 2x",async onclick(){try{const e=await(new t.EyeDropper).open();userActivity=!0,setFromColor(e.sRGBHex),colorpickerCallback()}catch{}}})]),f=e("palette",{onclick:onPaletteClicked,oncontextmenu:onPaletteClicked})]);const inputsToObj=type=>{const res={type};for(const[e,t]of Object.entries(x[type]))res[e]=parseFloat(t.value);return res};for(const[key,val]of Object.entries(x))Object.defineProperty(val,"color",{get:inputsToObj.bind(null,key)});Object.defineProperty(x.hex=[y],"color",{get:()=>y.value.trim()}),Object.defineProperty(x,"color",{get:()=>x[currentFormat].color}),Object.defineProperty(x,"colorString",{get:()=>currentFormat&&a.format(x[currentFormat].color,void 0,{round:!0})}),HUE_COLORS.forEach(color=>Object.assign(color,a.parse(color.hex))),n.style.setProperty("--margin","8px"),initialized=!0}function hide(){shown&&(colorpickerCallback(""),unregisterEvents(),focusNoScroll(prevFocusedElement),n.remove(),shown=!1)}function setColor(color){return"string"==typeof color?color=a.parse(color):"object"==typeof color&&color&&!color.type&&(color=Object.assign({},color,{type:a.guessType(color)})),!(!color||!color.type)&&(initialized||init(),setFromColor(color),!0)}function readCurrentColorFromRamps(){if(0===o.offsetWidth)HSV.h=HSV.s=HSV.v=0;else{const{x:e,y:t}=dragging.saturationPointerPos;HSV.h=a.snapToInt(dragging.hueKnobPos/p.offsetWidth*360),HSV.s=e/o.offsetWidth,HSV.v=(o.offsetHeight-t)/o.offsetHeight}}function setFromSaturationElement(event){event.preventDefault();const e=o.offsetWidth,t=o.offsetHeight,r=n.getBoundingClientRect(),deltaY=event.clientY-r.top,a=dragging.saturationPointerPos.x=constrain(0,e,event.clientX-r.left),s=dragging.saturationPointerPos.y=constrain(0,t,deltaY);i.style.left=a-5+"px",i.style.top=s-5+"px",readCurrentColorFromRamps(),renderInputs()}function setFromHueElement(event){const{left,width}=getScreenBounds(p),currentX=event?getTouchPosition(event).clientX:left+width*a.constrainHue(HSV.h)/360,normalizedH=constrain(0,1,(currentX-left)/width),e=dragging.hueKnobPos=width*normalizedH;l.style.left=e-Math.round(l.offsetWidth/2)+"px",o.style.backgroundColor=hueDistanceToColorString(normalizedH),HSV.h=event?Math.round(360*normalizedH):HSV.h,renderInputs()}function setFromOpacityElement(event){const{left,width}=getScreenBounds(h),normalized=constrain(0,1,(getTouchPosition(event).clientX-left)/width);u.style.left=width*normalized-Math.ceil(u.offsetWidth/2)+"px",HSV.a=Math.round(100*normalized)/100,renderInputs()}function setFromFormatElement({shiftKey}){userActivity=!0,HSV.a=isNaN(HSV.a)?1:HSV.a;const formats=Object.keys(d),dir=shiftKey?-1:1,total=formats.length;x.colorString===x.prevColorString&&Object.assign(HSV,prevHSV),switchInputGroup(formats[(formats.indexOf(currentFormat)+dir+total)%total]),renderInputs()}function setFromHexLettercaseElement(){const isUpper=Boolean(options.hexUppercase);m[isUpper].dataset.active="",delete m[!isUpper].dataset.active;const value=y.value;y.value=isUpper?value.toUpperCase():value.toLowerCase(),setFromInputs()}function setFromInputs(event){event&&(userActivity=!0),Object.values(x[currentFormat]).every(validateInput)&&setFromColor(x.color)}function setFromKeyboard(event){const{key,ctrlKey:ctrl,altKey:alt,shiftKey:shift,metaKey:meta}=event;switch(key){case"Tab":case"PageUp":case"PageDown":if(!ctrl&&!alt&&!meta){const e=r.activeElement,inputs=Object.values(x[currentFormat]),lastInput=inputs[inputs.length-1];if("Tab"===key&&shift&&e===inputs[0])maybeFocus(lastInput);else if("Tab"!==key||shift||e!==lastInput){if("Tab"===key||shift)return;setFromFormatElement({shift:"PageUp"===key||shift})}else maybeFocus(inputs[0]);event.preventDefault()}return;case"ArrowUp":case"ArrowDown":return void(!event.metaKey&&"input"===r.activeElement.localName&&r.activeElement.checkValidity()&&setFromKeyboardIncrement(event))}}function setFromKeyboardIncrement(event){const e=r.activeElement,{key,ctrlKey:ctrl,altKey:alt,shiftKey:shift}=event,dir="ArrowUp"===key?1:-1;let value,newValue;if("hex"===currentFormat){value=e.value.trim();const isShort=value.length<=5,[t,r,n,o=""]=e.value.match(isShort?/[\da-f]/gi:/[\da-f]{2}/gi);let ceiling,data;ctrl||shift||alt?(ceiling=isShort?15:255,data=[[ctrl,t],[shift,r],[alt,n]]):(ceiling=isShort?4095:16777215,data=[[!0,t+r+n]]),newValue="#"+data.map(([affected,part])=>((part=constrain(0,ceiling,parseInt(part,16)+dir*(affected?1:0)))+ceiling+1).toString(16).slice(1)).join("")+o,newValue=options.hexUppercase?newValue.toUpperCase():newValue.toLowerCase()}else if(!alt){value=parseFloat(e.value);const isHue="H"===e.title,isAlpha=e===x[currentFormat].a,isRGB="rgb"===currentFormat;newValue=constrain(isHue?-360:0,isHue?360:isAlpha?1:isRGB?255:100,value+(shift&&!ctrl?10:ctrl&&!shift?isHue||isRGB?100:50:1)*(isAlpha?.01:1)*dir),newValue=isAlpha?alphaToString(newValue):newValue}event.preventDefault(),userActivity=!0,void 0!==newValue&&newValue!==value&&(e.value=newValue,setFromColor(x.color))}function validateInput(e){const isAlpha=e===x[currentFormat].a;let isValid=(isAlpha||e.value.trim())&&e.checkValidity();return isAlpha||isValid||"rgb"!==currentFormat?isAlpha&&!isValid&&(isValid=parseAs(e,parseFloat)):isValid=parseAs(e,parseInt),isAlpha&&isValid&&(isValid=lastOutputColor!==colorToString(x.color)),isValid}function setFromColor(color){color=(color="string"==typeof color?a.parse(color):color)||a.parse("#f00");const newHSV=a.toHSV(color);Object.entries(newHSV).every(([e,t])=>t===HSV[e]||Math.abs(t-HSV[e])<.001)||(HSV=newHSV,renderKnobs(color),switchInputGroup(color.type),setFromHueElement())}function switchInputGroup(format){if(currentFormat!==format){if(currentFormat)delete d[currentFormat].dataset.active;else for(const fmt in d)delete d[fmt].dataset.active;d[format].dataset.active="",maybeFocus(Object.values(x[format])[0]),currentFormat=format}}function renderKnobs(color){const e=o.offsetWidth*HSV.s,t=o.offsetHeight*(1-HSV.v);i.style.left=e-5+"px",i.style.top=t-5+"px",dragging.saturationPointerPos={x:e,y:t};const hueX=p.offsetWidth*constrain(0,1,HSV.h/360);l.style.left=hueX-7.5+"px",dragging.hueKnobPos=hueX;const opacityX=h.offsetWidth*(isNaN(HSV.a)?1:HSV.a);u.style.left=opacityX-7.5+"px",o.style.backgroundColor=color}function renderInputs(){const rgb=a.fromHSV(HSV,"rgb");if("hex"===currentFormat)y.value=colorToString(rgb,"hex");else for(const[e,t]of Object.entries(a.fromHSV(HSV,currentFormat))){const r=x[currentFormat][e];r&&(r.value="a"===e?alphaToString()||1:Math.round(t))}g.style.backgroundColor=colorToString(rgb,"rgb"),c.style.background="linear-gradient(to right,"+colorToString(Object.assign(rgb,{a:0}),"rgb")+","+colorToString(Object.assign(rgb,{a:1}),"rgb")+")",colorpickerCallback();const colorString=x.colorString;x.prevColorString===colorString?Object.assign(HSV,prevHSV):(x.prevColorString=colorString,Object.assign(prevHSV,HSV))}function onPopupMoveStart(event){if(!event.button&&!hasModifiers(event)){captureMouse(event,"popup"),n.dataset.moving="";const[e,t]=(n.style.transform.match(/[-.\d]+/g)||[]).map(parseFloat);dragging.popupX=event.clientX-(e||0),dragging.popupY=event.clientY-(t||0),r.addEventListener("mouseup",onPopupMoveEnd)}}function onPopupMove({clientX:e,clientY:t}){n.style.transform=`translate(${e-dragging.popupX}px, ${t-dragging.popupY}px)`}function onPopupMoveEnd(event){event.button||(r.addEventListener("mouseup",onPopupMoveEnd),delete n.dataset.moving)}function onPopupResizeStart(event){event.target!==n||event.button||hasModifiers(event)||(r.addEventListener("mouseup",onPopupResizeEnd),n.dataset.resizing="")}function onPopupResizeEnd(event){event.button||(delete n.dataset.resizing,r.removeEventListener("mouseup",onPopupResizeEnd),maxHeight!==n.style.height&&(maxHeight=n.style.height,PUBLIC_API.options.maxHeight=parseFloat(maxHeight),fitPaletteHeight()))}function onHexLettercaseClicked(){options.hexUppercase=!options.hexUppercase,setFromHexLettercaseElement()}function onSaturationMouseDown(event){captureMouse(event,"saturation")&&setFromSaturationElement(event)}function onSaturationMouseUp(event){releaseMouse(event,"saturation")}function onHueKnobMouseDown(event){captureMouse(event,"hue")}function onOpacityKnobMouseDown(event){captureMouse(event,"opacity")}function onHueMouseDown(event){captureMouse(event,"hue")&&setFromHueElement(event)}function onOpacityMouseDown(event){captureMouse(event,"opacity")&&setFromOpacityElement(event)}function onPaletteClicked(e){e.target!==e.currentTarget&&e.target.__color&&(!e.button&&setColor(e.target.__color)?(userActivity=!0,colorpickerCallback()):e.button&&options.paletteCallback&&(e.preventDefault(),options.paletteCallback(e.target)))}function onMouseUp(event){releaseMouse(event,["saturation","hue","opacity","popup"]),onMouseDown.outsideClick&&(prevFocusedElement||hide())}function onMouseDown(event){(onMouseDown.outsideClick=!event.button&&!event.target.closest(".colorpicker-popup"))&&(prevFocusedElement=null,captureMouse(event))}function onMouseMove(event){event.button||(dragging.saturation&&setFromSaturationElement(event),dragging.hue&&setFromHueElement(event),dragging.opacity&&setFromOpacityElement(event),dragging.popup&&onPopupMove(event))}function onKeyDown(e){if(!hasModifiers(e))switch(e.key){case"Enter":case"Escape":e.preventDefault(),e.stopPropagation(),hide()}}function onCloseRequest(event){event.detail!==PUBLIC_API?hide():!prevFocusedElement&&e&&(prevFocusedElement=e.display.input)}function colorpickerCallback(colorString=currentColorToString()){const isCallable="function"==typeof options.callback;colorString||!isCallable?userActivity&&Object.values(x[currentFormat]).every(e=>e.checkValidity())&&(lastOutputColor=colorString.replace(/\b0\./g,"."),isCallable&&options.callback(lastOutputColor)):options.callback("")}function captureMouse({button},mode){if(0===button&&(r.addEventListener("mouseup",onMouseUp),r.addEventListener("mousemove",onMouseMove),mode)){for(const e of toArray(mode))dragging[e]=!0;return userActivity=!0,!0}}function hasModifiers(e){return e.shiftKey||e.ctrlKey||e.altKey||e.metaKey}function releaseMouse(event,mode){if((!event||0===event.button)&&(r.removeEventListener("mouseup",onMouseUp),r.removeEventListener("mousemove",onMouseMove),mode)){for(const e of toArray(mode))dragging[e]=!1;return userActivity=!0,!0}}function getTouchPosition(event){return event.touches&&event.touches[0]||event}function registerEvents(){t.addEventListener("keydown",onKeyDown,!0),t.addEventListener("mousedown",onMouseDown,!0),t.addEventListener("close-colorpicker-popup",onCloseRequest,!0)}function unregisterEvents(){t.removeEventListener("keydown",onKeyDown,!0),t.removeEventListener("mousedown",onMouseDown,!0),t.removeEventListener("close-colorpicker-popup",onCloseRequest,!0),releaseMouse()}function colorToString(color,type=currentFormat){return a.format(color,type,options)}function alphaToString(e=HSV.a){return a.formatAlpha(e)}function currentColorToString(format=currentFormat,alpha=HSV.a){const converted=a.fromHSV(HSV,format);return converted.a=isNaN(alpha)||1===alpha?void 0:alpha,colorToString(converted,format)}function mixColorToString(start,end,amount){return colorToString({r:start.r+(end.r-start.r)*amount,g:start.g+(end.g-start.g)*amount,b:start.b+(end.b-start.b)*amount,a:1},"hex")}function hueDistanceToColorString(hueRatio){let prevColor;for(const color of HUE_COLORS){if(prevColor&&color.start>=hueRatio)return mixColorToString(prevColor,color,(hueRatio-prevColor.start)/(color.start-prevColor.start));prevColor=color}return HUE_COLORS[0].hex}function reposition(){const{offsetWidth:e,offsetHeight:t}=n,{top:r,left:o,right:a,bottom:s}=options,maxX=innerWidth-e,maxY=innerHeight-t,i=n.style;isNaN(o)?isNaN(a)||(i.right=constrain(0,Math.max(0,a<=maxX?maxX:a-e),a)+"px"):i.left=constrain(0,Math.max(0,o<=maxX?maxX:o-e),o)+"px",isNaN(r)?isNaN(s)||(i.bottom=constrain(0,Math.max(0,s<=maxY?maxY:s-t-20),s)+"px"):i.top=constrain(0,Math.max(0,r<=maxY?maxY:r-t-20),r)+"px",i.transform=""}function renderPalette(){for(;f.firstChild;)f.firstChild.remove();f.append(...options.palette),options.palette.length?(n.dataset.resizable="",n.addEventListener("mousedown",onPopupResizeStart),fitPaletteHeight()):(delete n.dataset.resizable,n.removeEventListener("mousedown",onPopupResizeStart))}function fitPaletteHeight(){n.style.setProperty("--fit-height",Math.min(220+f.scrollHeight+8,parseFloat(maxHeight))+"px")}function maybeFocus(e){allowInputFocus&&e.focus()}function focusNoScroll(e){if(e){const{scrollY:r,scrollX:n}=t;e.focus({preventScroll:!0}),e=null,t.scrollY===r&&t.scrollX===n||setTimeout(t.scrollTo,0,n,r)}}function getScreenBounds(e){const bounds=e.getBoundingClientRect(),{scrollTop,scrollLeft}=r.scrollingElement;return{top:bounds.top+scrollTop,left:bounds.left+scrollLeft,width:bounds.width,height:bounds.height}}function guessTheme(){return(0,s.default)(options.guessBrightness||e&&((e.display.renderedView||[])[0]||{}).text||e&&e.display.lineDiv,{bg:"backgroundColor"}).bgLuma<.5?"dark":"light"}function parseAs(e,parser){const num=parser(e.value);if(!isNaN(num)&&(!e.min||num>=parseFloat(e.min))&&(!e.max||num<=parseFloat(e.max)))return e.value=num,!0}function toArray(val){return val?Array.isArray(val)?val:[val]:[]}};var a=o(2928),s=o(8872)}}])}